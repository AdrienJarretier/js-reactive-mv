<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Observer test</title>


    <script src="Observer.js"></script>
    <script src="MV.js"></script>

    <style>
        div {
            margin-top: 20px;
        }

        a {
            display: block;
            line-height: 30px;
            margin-top: 5px;
        }

        a:hover {
            background-color: hsl(0, 0%, 90%);
        }
    </style>
</head>

<body>

    <div id="links">
        <a href="#!">insect</a>
        <a href="#!">tiger</a>
    </div>

    <div>
        <input id="input-contentTitle" type="text">
    </div>

    <div>
        <textarea id="textArea-contentInput"></textarea>
    </div>

    <div id="titleContentOutput"></div>

    <div id="textContentOutput"></div>


    <script>

        let model = new Model();
        let view = new View(model);

        let contents = {
            'insect': {
                'title': 'insect',
                'text': 'bzzzz bzzzz bzzzz'
            },
            'tiger': {
                'title': 'tiger',
                'text': 'This is grrrr grrrr'
            }
        };

        model.addKey('clickedLink');
        model.addKey('active-content-title');
        model.addKey('active-content');


        view.addGroupedClickable(
            'clickedLink',
            document.getElementById('links').getElementsByTagName('a'));
        model.addObserverHandler('clickedLink', (v) => {
            model.set('active-content-title', contents[v]['title']);
            model.set('active-content', contents[v]['text']);
        });
        model.addObserverHandler('active-content-title', (v) => {
            if (model.get('clickedLink')) {
                contents[model.get('clickedLink')].title = v;
            }
        });
        model.addObserverHandler('active-content', (v) => {
            if (model.get('clickedLink')) {
                contents[model.get('clickedLink')].text = v;
            }
        });



        view.addInput(
            'active-content-title',
            document.getElementById('input-contentTitle'));
        view.addInput(
            'active-content',
            document.getElementById('textArea-contentInput'));



        view.addOutput(
            'active-content-title',
            document.getElementById('titleContentOutput'));
        view.addOutput(
            'active-content',
            document.getElementById('textContentOutput'));

    </script>
</body>

</html>